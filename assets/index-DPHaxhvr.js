import{u as z,r as n,j as e,L as R,a as i}from"./index-Tgrbomq4.js";import{C as A,L as D}from"./index-2WrujwzY.js";import{b as O,S as H}from"./3-D5zmpW9j.js";import{H as W}from"./house-C21o2Jy0.js";import{S as Q}from"./search-DJuql4ES.js";import{C as U}from"./chevron-up-Cn5ZpsZP.js";const q=({filters:p,options:c,onChange:g,onReset:x,onClose:m})=>{const h=[{key:"role",label:"Role",items:c.roles},{key:"school",label:"University",items:c.schools},{key:"year",label:"Year",items:c.years}];return e.jsxs("div",{className:"flex flex-col gap-20 p-20",children:[h.map(d=>e.jsxs("div",{className:"flex flex-col gap-16",children:[e.jsx("h4",{className:"text-base font-bold text-gray-900",children:d.label}),e.jsx("div",{className:"flex flex-wrap gap-8",children:d.items.map(a=>{const y=p[d.key].includes(a);return e.jsx("button",{onClick:()=>{g(d.key,a),m()},className:i("px-16 py-8 rounded-lg text-sm font-medium transition-all border",y?"bg-primary text-white border-primary shadow-sm":"bg-white text-[#7f8894] border-[#f0f0f0] hover:border-primary/30 hover:bg-gray-50"),children:a},a)})})]},d.key)),e.jsx("div",{className:"flex justify-end pt-16 border-t border-gray-100",children:e.jsx("button",{onClick:x,className:"px-16 py-8 text-sm font-medium text-gray-400 hover:text-primary transition-colors",children:"Reset all filters"})})]})},S=p=>{const c=p.replace(/-\d+$/,""),[g,x]=c.split(" "),m=x==="Winter"?1:x==="Spring"?3:x==="Summer"?7:9;return new Date(`${g}-${String(m).padStart(2,"0")}-01`)},k=()=>{const{showModal:p}=z(),[c,g]=n.useState([]),[x,m]=n.useState(!0),[h,d]=n.useState(""),[a,y]=n.useState({role:[],school:[],year:[]}),[f,L]=n.useState(null);n.useEffect(()=>{fetch("/website/data/lectures.json").then(s=>s.json()).then(s=>{g(s),m(!1)}).catch(s=>{console.error("Failed to load lectures:",s),m(!1)})},[]);const C=n.useMemo(()=>{const s=[...new Set(c.map(l=>l.role))].sort(),t=[...new Set(c.map(l=>l.school))].sort(),r=[...new Set(c.flatMap(l=>l.periods.map(o=>o.split(" ")[0])))].sort((l,o)=>Number(o)-Number(l));return{roles:s,schools:t,years:r}},[c]),v=n.useMemo(()=>{const s=[];return c.forEach(t=>{t.courses.forEach(r=>{s.push({...t,course:r,period:t.periods[0].replace(/-\d+$/,"")})})}),s},[c]),w=n.useMemo(()=>v.filter(s=>{if(h){const t=h.toLowerCase();if(!`${s.role} ${s.school} ${s.course.en} ${s.course.ko}`.toLowerCase().includes(t))return!1}return!(a.role.length>0&&!a.role.includes(s.role)||a.school.length>0&&!a.school.includes(s.school)||a.year.length>0&&!s.periods.map(r=>r.split(" ")[0]).some(r=>a.year.includes(r)))}),[v,h,a]),j=n.useMemo(()=>{const s={};return w.forEach(t=>{const r=t.period.split(" ")[0];s[r]||(s[r]=[]),s[r].push(t)}),Object.keys(s).forEach(t=>{s[t].sort((r,l)=>S(l.period).getTime()-S(r.period).getTime())}),s},[w]),b=n.useMemo(()=>Object.keys(j).sort((s,t)=>Number(t)-Number(s)),[j]),E=s=>{const t=j[s]||[],r=t.filter(o=>o.role==="Lecturer").length,l=t.filter(o=>o.role==="Teaching Assistant").length;return{lecturer:r,ta:l,total:t.length}},M=(s,t)=>{y(r=>({...r,[s]:r[s].includes(t)?r[s].filter(l=>l!==t):[...r[s],t]}))},T=()=>{y({role:[],school:[],year:[]}),d("")};return n.useEffect(()=>{b.length>0&&f===null&&L(b[0])},[b,f]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"relative w-full h-200 md:h-332 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${O})`}}),e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsx("div",{className:"relative h-full flex items-center justify-center",children:e.jsx("h1",{className:"text-2xl md:text-[36px] font-semibold text-white text-center",children:"Lectures"})})]}),e.jsx("div",{className:"max-w-1480 mx-auto w-full px-16 md:px-20 py-20 md:py-40",children:e.jsxs("div",{className:"flex items-center gap-8 md:gap-10 flex-wrap",children:[e.jsx(R,{to:"/",className:"text-gray-400 hover:text-primary transition-colors",children:e.jsx(W,{size:16})}),e.jsx("span",{className:"text-[#cdcdcd]",children:"›"}),e.jsx("span",{className:"text-sm md:text-base text-primary font-medium",children:"Lectures"})]})}),e.jsxs("section",{className:"max-w-1480 mx-auto w-full px-16 md:px-20 pb-60 md:pb-120",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-12 md:gap-16 mb-24 md:mb-32",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Q,{className:"absolute left-14 top-1/2 -translate-y-1/2 size-18 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:s=>d(s.target.value),placeholder:"Search by course, university, role...",className:"w-full pl-44 pr-16 py-14 border border-gray-200 rounded-xl text-sm md:text-base focus:outline-none focus:border-primary transition-colors"})]}),e.jsxs("button",{onClick:()=>p({title:"Filter Lectures",maxWidth:"500px",children:e.jsx(q,{filters:a,options:C,onChange:M,onReset:T,onClose:()=>{}})}),className:"flex items-center justify-center gap-8 px-20 py-14 bg-gray-50 border border-gray-200 rounded-xl text-sm md:text-base font-medium text-gray-700 hover:bg-gray-100 transition-colors shrink-0",children:[e.jsx(H,{size:18}),"Filters",(a.role.length>0||a.school.length>0||a.year.length>0)&&e.jsx("span",{className:"w-20 h-20 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:a.role.length+a.school.length+a.year.length})]}),e.jsxs("div",{className:"px-12 md:px-16 py-12 md:py-16 bg-gray-50 border border-gray-100 rounded-xl text-sm md:text-base font-medium text-gray-500 text-center shrink-0",children:[w.length," of ",v.length]})]}),x?e.jsx("div",{className:"bg-gray-50 rounded-2xl p-60 text-center",children:e.jsx("p",{className:"text-md text-gray-500",children:"Loading lectures..."})}):b.length>0?e.jsx("div",{className:"flex flex-col gap-16",children:b.map(s=>{const t=E(s),r=j[s]||[],l=new Date().getFullYear(),o=s===String(l);return e.jsxs("div",{className:i("border rounded-2xl overflow-hidden shadow-sm",o?"border-amber-300":"border-gray-100"),children:[e.jsxs("button",{onClick:()=>L(f===s?null:s),className:i("w-full flex items-center justify-between px-24 py-20 transition-colors",o?"bg-amber-100 hover:bg-amber-200":"bg-gray-50 hover:bg-gray-100"),children:[e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("span",{className:i("text-lg font-semibold",o?"text-amber-800":"text-gray-900"),children:s}),o&&e.jsx("span",{className:"px-8 py-2 bg-amber-500 text-white text-[10px] md:text-xs font-semibold rounded-full",children:"NEW"})]}),e.jsxs("span",{className:i("text-base",o?"text-amber-700":"text-gray-500"),children:[t.lecturer," Lecturer · ",t.ta," Teaching Assistant"]})]}),f===s?e.jsx(U,{className:"size-20 text-gray-500"}):e.jsx(A,{className:"size-20 text-gray-500"})]}),f===s&&e.jsx("div",{className:"flex flex-col",children:r.length===0?e.jsx("div",{className:"p-32 md:p-40 text-center bg-white border-t border-gray-100",children:e.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"등록된 강의가 없습니다."})}):r.map((u,Y)=>{const N=u.role==="Lecturer";return e.jsx("div",{className:"p-20 md:p-24 bg-white border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-16 md:gap-20",children:[e.jsx("div",{className:"flex flex-col items-center shrink-0 w-60 md:w-80",children:e.jsx("div",{className:i("w-full py-8 md:py-10 rounded-lg text-center",N?"bg-amber-500":"bg-red-500"),children:e.jsx("span",{className:"text-xs md:text-sm font-bold text-white",children:N?"L":"TA"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-6 mb-8",children:[e.jsx("span",{className:i("px-8 py-4 rounded-md text-[10px] md:text-xs font-bold border",N?"bg-white text-amber-600 border-amber-500":"bg-white text-red-600 border-red-500"),children:u.school}),e.jsx("span",{className:i("px-8 py-4 rounded-md text-[10px] md:text-xs font-bold",N?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:u.role})]}),e.jsx("div",{className:"flex flex-wrap gap-4 mb-10",children:u.periods.map(($,F)=>e.jsx("span",{className:"px-8 py-4 bg-gray-100 border border-gray-200 rounded-md text-[10px] md:text-xs font-medium text-gray-600",children:$},F))}),e.jsx("h4",{className:"text-sm md:text-base font-bold text-gray-900 leading-relaxed",children:u.course.en}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-4",children:u.course.ko})]})]})},Y)})})]},s)})}):e.jsx("div",{className:"bg-gray-50 rounded-2xl p-60 text-center",children:e.jsx("p",{className:"text-md text-gray-500",children:"검색 결과가 없습니다."})})]})]})};n.memo(k);const V=()=>e.jsx(D,{children:e.jsx(k,{})});export{V as Lectures};
