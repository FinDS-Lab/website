const W=i=>{const p=/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/,a=i.match(p);if(!a)return{data:{},content:i};const t=a[1],h=a[2],l={};return t.split(`
`).forEach(g=>{const n=g.indexOf(":");if(n>-1){const o=g.slice(0,n).trim();let s=g.slice(n+1).trim();s.startsWith("[")&&s.endsWith("]")?l[o]=s.slice(1,-1).split(",").map(f=>f.trim()):(s.startsWith('"')&&s.endsWith('"')&&(s=s.slice(1,-1)),l[o]=s)}}),{data:l,content:h}},$=(i,p)=>{if(!i)return"";const a=new Date(i);if(isNaN(a.getTime()))return i;const t=a.getFullYear(),h=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return p.replace("%Y",String(t)).replace("%m",h).replace("%d",l).replace("%B",a.toLocaleString("en",{month:"long"})).replace("%b",a.toLocaleString("en",{month:"short"}))},d=(i,p)=>{const a=p?.basePath||"";let t=i;const h=[];t=t.replace(/```(\w*)\n([\s\S]*?)```/g,(e,r,c)=>{const u=r?` class="language-${r}"`:"",m=`___CODEBLOCK_${h.length}___`;return h.push(`<pre><code${u}>${c.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()}</code></pre>`),m});const l=[];t=t.replace(/`([^`]+)`/g,(e,r)=>{const c=`___INLINECODE_${l.length}___`;return l.push(`<code>${r}</code>`),c}),t=t.replace(/!\[([^\]]*)\]\(([^)"]+)(?:\s+"([^"]*)")?\)/g,(e,r,c,u)=>{let m=c;c.startsWith("/")&&a?m=a+c:(c.startsWith("../")||c.startsWith("./"))&&(m=a+"/"+c.replace(/^\.\//,""));const _=u?` title="${u}"`:"";return`<img src="${m}" alt="${r}"${_} class="rounded-xl shadow-sm my-16 max-w-full" />`}),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.replace(/^#### (.+)$/gm,"<h4>$1</h4>"),t=t.replace(/^### (.+)$/gm,"<h3>$1</h3>"),t=t.replace(/^## (.+)$/gm,"<h2>$1</h2>"),t=t.replace(/^# (.+)$/gm,"<h1>$1</h1>"),t=t.replace(/^[-*]{3,}\s*$/gm,"<hr />"),t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__(.+?)__/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t=t.replace(/\b_(.+?)_\b/g,"<em>$1</em>"),t=t.replace(/^> (.+)$/gm,"<blockquote>$1</blockquote>"),t=t.replace(/<\/blockquote>\n<blockquote>/g,"<br />");const g=t.split(`
`),n=[];let o=!1,s=!1;for(let e=0;e<g.length;e++){const r=g[e],c=r.match(/^- (.+)$/);if(c&&!r.includes("<")){o||(n.push("<ul>"),o=!0),n.push(`<li>${c[1]}</li>`);continue}else o&&!r.match(/^- /)&&(n.push("</ul>"),o=!1);const u=r.match(/^\d+\. (.+)$/);if(u&&!r.includes("<")){s||(n.push("<ol>"),s=!0),n.push(`<li>${u[1]}</li>`);continue}else s&&!r.match(/^\d+\. /)&&(n.push("</ol>"),s=!1);n.push(r)}return o&&n.push("</ul>"),s&&n.push("</ol>"),t=n.join(`
`),t=t.split(/\n\n+/).map(e=>(e=e.trim(),e?e.startsWith("<h")||e.startsWith("<ul")||e.startsWith("<ol")||e.startsWith("<blockquote")||e.startsWith("<pre")||e.startsWith("<hr")||e.startsWith("<img")||e.startsWith("<p")||e.startsWith("___CODEBLOCK")||e.startsWith("<li")?e:`<p>${e.replace(/\n/g,"<br />")}</p>`:"")).join(`
`),h.forEach((e,r)=>{t=t.replace(`___CODEBLOCK_${r}___`,e)}),l.forEach((e,r)=>{t=t.replace(`___INLINECODE_${r}___`,e)}),t},b=(i,p,a)=>{let t=i;const h=a?.basePath||"",l=/\{\{\s*page\.(\w+)(?:\s*\|\s*([^}]+))?\s*\}\}/g;return t=t.replace(l,(g,n,o)=>{let s=p[n];if(Array.isArray(s)&&(s=s.join(", ")),!o)return s||"";const f=o.split("|").map(e=>e.trim());for(const e of f){const r=e.match(/^date:\s*"([^"]+)"/);if(r){s=$(s||"",r[1]);continue}const c=e.match(/^default:\s*"([^"]*)"/);if(c){(!s||s==="")&&(s=c[1]);continue}if(e==="relative_url"){s&&typeof s=="string"&&(s=h+s);continue}}return s||""}),t=t.replace(/\{\{\s*site\.[^}]*\}\}/g,""),t=d(t,{basePath:h}),t};export{b as a,W as p};
