const g=a=>{const r=/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/,e=a.match(r);if(!e)return{data:{},content:a};const n=e[1],c=e[2],s={};return n.split(`
`).forEach(f=>{const o=f.indexOf(":");if(o>-1){const i=f.slice(0,o).trim();let t=f.slice(o+1).trim();t.startsWith("[")&&t.endsWith("]")?s[i]=t.slice(1,-1).split(",").map(p=>p.trim()):(t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1)),s[i]=t)}}),{data:s,content:c}},u=(a,r)=>{if(!a)return"";const e=new Date(a);if(isNaN(e.getTime()))return a;const n=e.getFullYear(),c=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return r.replace("%Y",String(n)).replace("%m",c).replace("%d",s).replace("%B",e.toLocaleString("en",{month:"long"})).replace("%b",e.toLocaleString("en",{month:"short"}))},d=(a,r,e)=>{let n=a;const c=e?.basePath||"",s=/\{\{\s*page\.(\w+)(?:\s*\|\s*([^}]+))?\s*\}\}/g;return n=n.replace(s,(f,o,i)=>{let t=r[o];if(Array.isArray(t)&&(t=t.join(", ")),!i)return t||"";const p=i.split("|").map(l=>l.trim());for(const l of p){const h=l.match(/^date:\s*"([^"]+)"/);if(h){t=u(t||"",h[1]);continue}const m=l.match(/^default:\s*"([^"]*)"/);if(m){(!t||t==="")&&(t=m[1]);continue}if(l==="relative_url"){t&&typeof t=="string"&&(t=c+t);continue}}return t||""}),n=n.replace(/\{\{\s*site\.[^}]*\}\}/g,""),n};export{d as a,g as p};
