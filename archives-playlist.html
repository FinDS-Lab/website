---
layout: default
title: Archives Playlist
permalink: /archives-playlist.html
---

<!-- ===== Unified Styles ===== -->
<style>
  :root {
    --gold: rgb(214, 177, 77);
    --gold-light: rgba(214, 177, 77, 0.1);
    --gold-mid: rgb(234, 197, 97);
    --gold-dark: rgb(194, 157, 57);
  }

  /* Banner Ïä§ÌÉÄÏùº (ÌÜµÏùº) */
  .banner-section {
    background: linear-gradient(135deg, 
      var(--gold) 0%, 
      var(--gold-mid) 25%, 
      var(--gold-dark) 50%, 
      var(--gold) 75%, 
      var(--gold-mid) 100%);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    position: relative;
    overflow: hidden;
    min-height: 200px;
    border-radius: 1rem;
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
    cursor: pointer;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* ÎÑ§Ìä∏ÏõåÌÅ¨ Î≤ÑÏä§Ìä∏ Ïï†ÎãàÎ©îÏù¥ÏÖò (ÌÜµÏùº) */
  .network-burst {
    position: absolute;
    width: 200px;
    height: 200px;
    pointer-events: none;
    opacity: 0;
    animation: burstAnimation 2s ease-out forwards;
  }

  @keyframes burstAnimation {
    0% {
      opacity: 0;
      transform: scale(0.3) rotate(0deg);
    }
    30% {
      opacity: 0.85;
    }
    100% {
      opacity: 0;
      transform: scale(2) rotate(180deg);
    }
  }

  .network-burst svg {
    width: 100%;
    height: 100%;
  }

  .burst-line {
    stroke: rgba(255, 255, 255, 0.7);
    stroke-width: 1.5;
    fill: none;
  }

  .burst-dot {
    fill: rgba(255, 255, 255, 0.95);
  }

  /* ÌÖçÏä§Ìä∏ Ïª®ÌÖåÏù¥ÎÑà (ÌÜµÏùº) */
  .banner-content {
    position: relative;
    z-index: 10;
    padding: 32px 24px;
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    min-height: 200px;
  }

  /* Breadcrumbs - Ìù∞ÏÉâ Î∞∞Í≤Ω, Í∏àÏÉâ ÌÖçÏä§Ìä∏Î°ú Î≥ÄÍ≤Ω (NoticeÏôÄ ÎèôÏùº) */
  .banner-breadcrumbs {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 16px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    padding: 10px 16px;
    border-radius: 999px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08), inset 0 1px 3px rgba(255,255,255,0.5);
    border: 1px solid rgba(214, 177, 77, 0.2);
    transition: all 0.3s ease;
  }

  .banner-breadcrumbs:hover {
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12), inset 0 1px 3px rgba(255,255,255,0.8);
    transform: translateY(-1px);
  }
  
  .banner-breadcrumbs a {
    color: var(--gold-dark);
    text-decoration: none;
    transition: all 0.2s;
    position: relative;
    font-weight: 600;
  }
  
  .banner-breadcrumbs a:hover {
    color: var(--gold);
    text-shadow: 0 0 8px rgba(214, 177, 77, 0.3);
  }

  /* ÎßÅÌÅ¨ Ìò∏Î≤Ñ Ïãú Î∞ëÏ§Ñ Ìö®Í≥º */
  .banner-breadcrumbs a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: var(--gold);
    transition: width 0.2s ease;
  }

  .banner-breadcrumbs a:hover::after {
    width: 100%;
  }
  
  .banner-breadcrumbs .sep {
    color: var(--gold-light);
    font-weight: 400;
    margin: 0;
    opacity: 0.6;
  }
  
  .banner-breadcrumbs span:not(.sep):not(a) {
    color: var(--gold);
    font-weight: 800;
    letter-spacing: 0.3px;
  }

  /* Breadcrumb ÏïÑÏù¥ÏΩò Ï∂îÍ∞Ä (ÏÑ†ÌÉùÏÇ¨Ìï≠) */
  .banner-breadcrumbs::before {
    content: 'üéµ';
    font-size: 14px;
    margin-right: 2px;
    opacity: 0.8;
  }

  /* Ï†úÎ™© (ÌÜµÏùº) */
  .banner-title {
    font-size: 2.5rem;
    font-weight: 900;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0,0,0,0.12);
    letter-spacing: -0.02em;
    margin: 0;
  }

  /* ===== Director Card Style (ÌÜµÏùºÎêú Ïπ¥Îìú Ïä§ÌÉÄÏùº) ===== */
  .playlist-container {
    max-width: 1280px;
    margin: 2rem auto 0;
    padding: 0 1rem;
  }

  .playlist-card {
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    transition: all 0.2s;
    margin-bottom: 1.5rem;
  }

  .playlist-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  .card-head {
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-mid) 100%);
    color: #ffffff;
    font-weight: 900;
    padding: 1rem 1.25rem;
    font-size: 18px;
    position: relative;
    overflow: hidden;
    text-shadow: 0 1px 3px rgba(0,0,0,0.2);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    user-select: none;
  }

  .card-head::after {
    content: "";
    position: absolute;
    top: 0;
    right: -100px;
    width: 200px;
    height: 100%;
    background: rgba(255,255,255,0.15);
    transform: skewX(-25deg);
  }

  .card-head-content {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .music-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    font-size: 16px;
  }

  .card-head-title {
    font-size: 18px;
    font-weight: 900;
    color: #ffffff;
    letter-spacing: -0.01em;
  }

  .playlist-badge {
    display: inline-block;
    padding: 3px 10px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 999px;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    margin-left: 12px;
    backdrop-filter: blur(10px);
  }

  .collapse-icon {
    width: 24px;
    height: 24px;
    color: #ffffff;
    transition: transform 0.3s ease;
    position: relative;
    z-index: 1;
  }

  .playlist-card.open .collapse-icon {
    transform: rotate(180deg);
  }

  .card-body {
    padding: 1.5rem;
    display: none;
  }

  .playlist-card.open .card-body {
    display: block;
  }

  /* ===== Music Player ===== */
  .music-player-box {
    width: 100%;
    background: #ffffff;
    border: 2px solid var(--gold);
    border-radius: 20px;
    padding: 24px 20px;
    box-shadow: 0 3px 15px rgba(214, 177, 77, 0.15);
  }

  .player-row {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-bottom: 14px;
  }
  
  .player-row:last-child {
    margin-bottom: 0;
  }

  .playback-row { gap: 10px; }
  .volume-row { gap: 10px; }
  .artist-row { padding: 6px 0; }
  .title-row { padding: 6px 0; }
  .progress-row { gap: 12px; }
  
  #musicArtist {
    font-size: 13px;
    font-weight: 700;
    color: var(--gold-dark);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: normal;
    text-align: center;
    line-height: 1.4;
  }
  
  #musicTitle {
    font-size: 16px;
    font-weight: 600;
    color: rgba(214, 177, 77, 0.85);
    white-space: normal;
    text-align: center;
    line-height: 1.4;
    max-width: 100%;
  }

  /* Time Display */
  .time-text {
    font-family: 'SF Mono', 'Roboto Mono', 'Monaco', 'Consolas', monospace;
    font-size: 12px;
    font-weight: 500;
    color: #6b7280;
    min-width: 45px;
    padding: 4px 8px;
    background: rgba(214, 177, 77, 0.08);
    border: 1px solid rgba(214, 177, 77, 0.2);
    border-radius: 8px;
    text-align: center;
    flex-shrink: 0;
    transition: all 0.2s ease;
    letter-spacing: 0.5px;
  }
  
  #currentTime {
    color: var(--gold);
    font-weight: 600;
  }
  
  #duration {
    color: #9ca3af;
  }
  
  .progress-container {
    position: relative;
    height: 10px;
    flex: 1;
    display: flex;
    align-items: center;
  }
  
  .progress-track {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: 0;
    right: 0;
    height: 5px;
    background: rgba(214, 177, 77, 0.15);
    border-radius: 2.5px;
  }
  
  .progress-fill {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: 0;
    height: 5px;
    background: var(--gold);
    border-radius: 2.5px;
    width: 0%;
    transition: width 0.1s;
  }
  
  .progress-slider {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 100%;
    height: 10px;
    background: transparent;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
    z-index: 2;
  }
  
  .progress-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    background: var(--gold);
    border: 2px solid #ffffff;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }

  /* Buttons */
  .nav-btn {
    width: 32px;
    height: 32px;
    padding: 6px;
    background: #ffffff;
    border: 1.5px solid rgba(214, 177, 77, 0.6);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  
  .nav-btn svg {
    width: 15px;
    height: 15px;
    color: var(--gold);
  }
  
  .play-btn {
    width: 42px;
    height: 42px;
    padding: 9px;
    background: #ffffff;
    border: 2px solid var(--gold);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(214, 177, 77, 0.2);
  }
  
  .play-btn svg {
    width: 20px;
    height: 20px;
    color: var(--gold);
  }
  
  .nav-btn:hover, .play-btn:hover {
    transform: scale(1.06);
    background: rgba(214, 177, 77, 0.08);
  }

  /* Volume */
  .mute-btn {
    padding: 5px;
    cursor: pointer;
    background: none;
    border: none;
  }
  
  .mute-btn svg {
    width: 18px;
    height: 18px;
    color: var(--gold);
  }
  
  .volume-slider {
    width: 120px;
    height: 5px;
    background: rgba(214, 177, 77, 0.2);
    border-radius: 2.5px;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
  }
  
  .volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    background: var(--gold);
    border-radius: 50%;
    cursor: pointer;
  }

  .hidden { display: none !important; }

  /* Î∞òÏùëÌòï (ÌÜµÏùº) */
  @media (max-width: 768px) {
    .banner-title { font-size: 2rem; }
    .banner-content { 
      padding: 28px 20px;
      min-height: 160px;
    }
    .banner-section {
      min-height: 160px;
    }
    .banner-breadcrumbs {
      font-size: 12px;
      padding: 8px 14px;
      gap: 0.6rem;
    }
    .banner-breadcrumbs::before {
      font-size: 12px;
    }
    .card-head {
      padding: 0.875rem 1rem;
    }
    .card-head-title {
      font-size: 16px;
    }
    .music-icon {
      width: 28px;
      height: 28px;
      font-size: 14px;
    }
    .playlist-badge {
      font-size: 10px;
      padding: 2px 8px;
    }
  }

  @media (max-width: 640px) {
    .banner-title { font-size: 1.75rem; }
    .banner-content { 
      padding: 24px 16px;
      min-height: 140px;
    }
    .banner-section {
      min-height: 140px;
    }
    .banner-breadcrumbs { 
      font-size: 11px;
      padding: 7px 12px;
      gap: 0.5rem;
    }
    .banner-breadcrumbs::before {
      display: none;
    }
    .card-body {
      padding: 1rem;
    }
    .card-head-content {
      gap: 8px;
    }
    .playlist-badge {
      margin-left: 8px;
    }
  }

  @media (max-width: 540px) {
    #musicTitle { font-size: 14px; }
    #musicArtist { font-size: 11px; }
    .nav-btn { width: 28px; height: 28px; }
    .play-btn { width: 35px; height: 35px; }
    .volume-slider { width: 100px; }
    .music-icon {
      width: 26px;
      height: 26px;
      font-size: 13px;
    }
  }

  @media (max-width: 480px) {
    .banner-content { 
      padding: 20px 16px;
      min-height: 120px;
    }
    .banner-section {
      min-height: 120px;
    }
    .banner-title { font-size: 1.5rem; }
    .banner-breadcrumbs { 
      font-size: 10px;
      gap: 0.4rem;
      padding: 6px 10px;
    }
    .card-head {
      padding: 0.75rem 1rem;
    }
    .card-head-title {
      font-size: 15px;
    }
    .card-head-content {
      gap: 6px;
    }
    .music-icon {
      width: 24px;
      height: 24px;
      font-size: 12px;
    }
    .playlist-badge {
      font-size: 9px;
      padding: 2px 6px;
      margin-left: 6px;
    }
    .collapse-icon {
      width: 20px;
      height: 20px;
    }
    
    /* ÌîåÎ†àÏù¥Ïñ¥ Î∞ïÏä§ Ìå®Îî© Ï°∞Ï†ï */
    .music-player-box {
      padding: 20px 16px;
    }
  }
  
  @media (max-width: 360px) {
    .card-head-title {
      font-size: 14px;
    }
    .playlist-badge {
      display: none; /* Îß§Ïö∞ ÏûëÏùÄ ÌôîÎ©¥ÏóêÏÑúÎäî Î∞∞ÏßÄ Ïà®ÍπÄ */
    }
    .music-icon {
      width: 22px;
      height: 22px;
      font-size: 11px;
    }
  }
</style>

<!-- ===== Page Title / Banner ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <div class="banner-section" onclick="createNetworkBurst(event, this)">
    <div class="banner-content">
      <div>
        <nav aria-label="Breadcrumb" class="banner-breadcrumbs">
          <a href="{{ '/' | relative_url }}" onclick="event.stopPropagation()">Home</a>
          <span class="sep">‚Ä∫</span>
          <a href="{{ '/archives-news.html' | relative_url }}" onclick="event.stopPropagation()">Archives</a>
          <span class="sep">‚Ä∫</span>
          <span aria-current="page">Playlist</span>
        </nav>
        <h1 class="banner-title">Playlist</h1>
      </div>
    </div>
  </div>
</section>

<!-- ===== Playlist Card Section ===== -->
<div class="playlist-container">
  <div class="playlist-card" id="ischoi-section">
    <div class="card-head" id="toggleHeader">
      <div class="card-head-content">
        <div class="music-icon">‚ô™</div>
        <h2 class="card-head-title">Insu Choi</h2>
        <span class="playlist-badge">Playlist</span>
      </div>
      <svg class="collapse-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
    <div class="card-body">
      <!-- Music Player -->
      <div id="musicPlayer" class="fade-in">
        <div class="music-player-box" role="group" aria-label="Î∞∞Í≤Ω ÏùåÏïÖ ÌîåÎ†àÏù¥Ïñ¥">

          <!-- Ï§Ñ1: Ï†úÎ™© -->
          <div class="player-row title-row">
            <span id="musicTitle">Loading...</span>
          </div>

          <!-- Ï§Ñ2: ÏïÑÌã∞Ïä§Ìä∏ -->
          <div class="player-row artist-row">
            <span id="musicArtist"></span>
          </div>

          <!-- Ï§Ñ3: Ïû¨ÏÉùÎ≤ÑÌäº -->
          <div class="player-row playback-row">
            <button id="prevBtn" class="nav-btn" type="button" aria-label="Ïù¥Ï†Ñ Í≥°">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path d="M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"/>
              </svg>
            </button>
            <button id="playPauseBtn" class="play-btn" type="button" aria-label="Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ">
              <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
              </svg>
              <svg id="pauseIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
              </svg>
            </button>
            <button id="nextBtn" class="nav-btn" type="button" aria-label="Îã§Ïùå Í≥°">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path d="M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798L4.555 5.168z"/>
              </svg>
            </button>
          </div>

          <!-- Ï§Ñ4: Î≥ºÎ•® -->
          <div class="player-row volume-row">
            <button id="muteBtn" class="mute-btn" type="button" aria-label="ÏùåÏÜåÍ±∞">
              <svg id="volumeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"/>
              </svg>
              <svg id="muteIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
            <input type="range" id="volumeSlider" min="0" max="100" value="30" class="volume-slider" aria-label="Î≥ºÎ•®">
          </div>

          <!-- Ï§Ñ5: ÏßÑÌñâÎ∞î/ÏãúÍ∞Ñ -->
          <div class="player-row progress-row">
            <span id="currentTime" class="time-text">0:00</span>
            <div class="progress-container">
              <div class="progress-track"></div>
              <div id="progressBar" class="progress-fill"></div>
              <input type="range" id="progressSlider" min="0" max="100" value="0" step="0.1" class="progress-slider" aria-label="Ïû¨ÏÉù ÏúÑÏπò">
            </div>
            <span id="duration" class="time-text">0:00</span>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- YouTube IFrame APIÏö© (Ïà®ÍπÄ) -->
<div id="youtube-player" style="display:none;"></div>

<!-- JavaScript (ÌÜµÏùºÎêú ÎÑ§Ìä∏ÏõåÌÅ¨ Ìå®ÌÑ¥ + ÌîåÎ†àÏù¥Ïñ¥ Í∏∞Îä•) -->
<script>
// Network burst animation (ÌÜµÏùº)
function createNetworkBurst(event, element) {
  const rect = element.getBoundingClientRect();
  const x = event.clientX - rect.left - 100;
  const y = event.clientY - rect.top - 100;

  const networkDiv = document.createElement('div');
  networkDiv.className = 'network-burst';
  networkDiv.style.left = x + 'px';
  networkDiv.style.top = y + 'px';

  const patterns = [generateHeartNetwork(), generateClubNetwork(), generateSpadeNetwork(), generateDiamondNetwork()];
  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];
  networkDiv.innerHTML = randomPattern;

  element.appendChild(networkDiv);
  setTimeout(() => element.removeChild(networkDiv), 2000);
}

function generateHeartNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const heartPath = 'M100,140 C80,120 40,100 40,70 C40,50 55,35 70,35 C85,35 95,45 100,55 C105,45 115,35 130,35 C145,35 160,50 160,70 C160,100 120,120 100,140 Z';
  svg += `<path d="${heartPath}" fill="none" class="burst-line" stroke-width="2"/>`;
  const nodes = [
    {x: 70, y: 35}, {x: 130, y: 35},
    {x: 40, y: 70}, {x: 160, y: 70},
    {x: 100, y: 140},
    {x: 60, y: 50}, {x: 140, y: 50},
    {x: 80, y: 90}, {x: 120, y: 90}
  ];
  const connections = [
    [0, 1], [0, 2], [1, 3], [2, 4], [3, 4],
    [0, 5], [1, 6], [5, 7], [6, 8], [7, 8]
  ];
  connections.forEach(([from, to]) => {
    svg += `<line x1="${nodes[from].x}" y1="${nodes[from].y}" x2="${nodes[to].x}" y2="${nodes[to].y}" class="burst-line" opacity="0.5"/>`;
  });
  nodes.forEach(node => {
    svg += `<circle cx="${node.x}" cy="${node.y}" r="${3 + Math.random() * 2}" class="burst-dot"/>`;
  });
  svg += '</svg>';
  return svg;
}

function generateClubNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const circles = [
    {x: 100, y: 60, r: 25},
    {x: 75, y: 85, r: 25},
    {x: 125, y: 85, r: 25}
  ];
  circles.forEach(circle => {
    svg += `<circle cx="${circle.x}" cy="${circle.y}" r="${circle.r}" fill="none" class="burst-line" stroke-width="2"/>`;
  });
  svg += `<line x1="100" y1="100" x2="100" y2="140" class="burst-line" stroke-width="3"/>`;
  const nodes = [];
  circles.forEach(circle => {
    for(let i = 0; i < 6; i++) {
      const angle = (i * Math.PI * 2) / 6;
      nodes.push({
        x: circle.x + circle.r * Math.cos(angle),
        y: circle.y + circle.r * Math.sin(angle)
      });
    }
  });
  nodes.push({x: 100, y: 100});
  nodes.push({x: 100, y: 140});
  for(let i = 0; i < nodes.length; i++) {
    for(let j = i + 1; j < nodes.length; j++) {
      const dist = Math.sqrt(Math.pow(nodes[i].x - nodes[j].x, 2) + Math.pow(nodes[i].y - nodes[j].y, 2));
      if(dist < 40) {
        svg += `<line x1="${nodes[i].x}" y1="${nodes[i].y}" x2="${nodes[j].x}" y2="${nodes[j].y}" class="burst-line" opacity="${0.3 + (1 - dist/40) * 0.4}"/>`;
      }
    }
  }
  nodes.forEach(node => {
    svg += `<circle cx="${node.x}" cy="${node.y}" r="${2 + Math.random() * 2}" class="burst-dot"/>`;
  });
  svg += '</svg>';
  return svg;
}

function generateSpadeNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const spadePath = 'M100,50 C80,50 60,65 60,85 C60,105 75,110 85,110 C90,110 95,108 100,105 C105,108 110,110 115,110 C125,110 140,105 140,85 C140,65 120,50 100,50 Z';
  svg += `<path d="${spadePath}" fill="none" class="burst-line" stroke-width="2"/>`;
  svg += `<path d="M100,105 L90,130 L110,130 Z" fill="none" class="burst-line" stroke-width="2"/>`;
  svg += `<line x1="100" y1="130" x2="100" y2="145" class="burst-line" stroke-width="3"/>`;
  const nodes = [
    {x: 100, y: 50},
    {x: 75, y: 70}, {x: 125, y: 70},
    {x: 60, y: 85}, {x: 140, y: 85},
    {x: 85, y: 110}, {x: 115, y: 110},
    {x: 100, y: 105},
    {x: 90, y: 130}, {x: 110, y: 130},
    {x: 100, y: 145}
  ];
  const connections = [
    [0, 1], [0, 2], [1, 3], [2, 4],
    [3, 5], [4, 6], [5, 7], [6, 7],
    [7, 8], [7, 9], [8, 10], [9, 10]
  ];
  connections.forEach(([from, to]) => {
    svg += `<line x1="${nodes[from].x}" y1="${nodes[from].y}" x2="${nodes[to].x}" y2="${nodes[to].y}" class="burst-line" opacity="0.4"/>`;
  });
  nodes.forEach((node, i) => {
    const size = i === 0 || i === 7 ? 4 : 3;
    svg += `<circle cx="${node.x}" cy="${node.y}" r="${size}" class="burst-dot"/>`;
  });
  svg += '</svg>';
  return svg;
}

function generateDiamondNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const diamondPath = 'M100,40 L140,100 L100,160 L60,100 Z';
  svg += `<path d="${diamondPath}" fill="none" class="burst-line" stroke-width="2"/>`;
  svg += `<line x1="100" y1="40" x2="100" y2="160" class="burst-line" opacity="0.5"/>`;
  svg += `<line x1="60" y1="100" x2="140" y2="100" class="burst-line" opacity="0.5"/>`;
  svg += `<line x1="80" y1="70" x2="120" y2="130" class="burst-line" opacity="0.3"/>`;
  svg += `<line x1="120" y1="70" x2="80" y2="130" class="burst-line" opacity="0.3"/>`;
  const nodes = [
    {x: 100, y: 40},
    {x: 140, y: 100},
    {x: 100, y: 160},
    {x: 60, y: 100},
    {x: 100, y: 100},
    {x: 80, y: 70}, {x: 120, y: 70},
    {x: 80, y: 130}, {x: 120, y: 130},
    {x: 120, y: 100}, {x: 80, y: 100}
  ];
  for(let i = 0; i < 4; i++) {
    svg += `<line x1="${nodes[i].x}" y1="${nodes[i].y}" x2="${nodes[4].x}" y2="${nodes[4].y}" class="burst-line" opacity="0.3"/>`;
  }
  nodes.forEach((node, i) => {
    const size = i < 4 ? 4 : i === 4 ? 5 : 2.5;
    svg += `<circle cx="${node.x}" cy="${node.y}" r="${size}" class="burst-dot" opacity="${i === 4 ? 1 : 0.8}"/>`;
  });
  for(let i = 0; i < 4; i++) {
    const angle = (i * Math.PI) / 2;
    const x = 100 + 30 * Math.cos(angle);
    const y = 100 + 30 * Math.sin(angle);
    svg += `<circle cx="${x}" cy="${y}" r="1.5" class="burst-dot" opacity="0.6"/>`;
  }
  svg += '</svg>';
  return svg;
}

// ===================== Music Player Code =====================
var YOUTUBE_CONFIG = { shuffle: true };
var tracks = [];
var shuffledOrder = [];
var orderPos = 0;
var currentVideoIndex = 0;
var player;
var isPlayerReady = false;
var updateTimer = null;
var isDragging = false;
var playlistLoadError = false;

function extractVideoId(url) {
  if (!url) return null;
  if (/^[a-zA-Z0-9_-]{11}$/.test(url)) return url;
  var videoId = null;
  if (url.includes('music.youtube.com')) {
    var match = url.match(/[?&]v=([a-zA-Z0-9_-]{11})/);
    if (match) videoId = match[1];
  } else if (url.indexOf('v=') > -1) {
    var vParam = url.split('v=')[1];
    if (vParam) videoId = vParam.split(/[&#]/)[0];
  } else if (url.indexOf('youtu.be/') > -1) {
    videoId = url.split('youtu.be/')[1].split(/[?#&]/)[0];
  } else if (url.indexOf('/embed/') > -1) {
    videoId = url.split('/embed/')[1].split(/[?#&]/)[0];
  }
  return (videoId && /^[a-zA-Z0-9_-]{11}$/.test(videoId)) ? videoId : null;
}

function toNumberOrNull(v) {
  var n = parseFloat(v);
  return Number.isFinite(n) ? n : null;
}

function loadPlaylistJson() {
  console.log('Starting to load playlist...');
  var baseUrl = window.location.origin;
  var pathname = window.location.pathname;
  var basePath = pathname.substring(0, pathname.lastIndexOf('/') + 1);
  
  var paths = [
    basePath + 'playlist/ischoi.json',
    baseUrl + '/playlist/ischoi.json',
    './playlist/ischoi.json',
    '/playlist/ischoi.json'
  ];
  
  console.log('Will try these paths:', paths);
  
  var tryLoad = function(index) {
    if (index >= paths.length) {
      console.error('Failed to load playlist from all paths');
      handlePlaylistError();
      return;
    }
    
    var url = paths[index];
    console.log('Attempting to load:', url);
    
    fetch(url)
      .then(function(response) {
        console.log('Response status:', response.status);
        if (!response.ok) {
          throw new Error('HTTP ' + response.status);
        }
        return response.json();
      })
      .then(function(data) {
        console.log('Successfully loaded data:', data);
        if (data && data.items && Array.isArray(data.items)) {
          buildFromJson(data);
        } else {
          console.error('Invalid data structure');
          tryLoad(index + 1);
        }
      })
      .catch(function(error) {
        console.error('Failed to load from', url, ':', error);
        tryLoad(index + 1);
      });
  };
  
  tryLoad(0);
}

function buildFromJson(json) {
  tracks = [];
  YOUTUBE_CONFIG.shuffle = (typeof json.shuffle === 'boolean') ? json.shuffle : true;
  
  if (!json.items || !Array.isArray(json.items)) {
    console.error('No items array found');
    handlePlaylistError();
    return;
  }
  
  console.log('Processing', json.items.length, 'items');
  
  json.items.forEach(function(item, index) {
    if (item.enabled === false) return;
    
    var id = item.id || extractVideoId(item.url);
    if (!id) {
      console.warn('No valid ID for item', index, item);
      return;
    }
    
    tracks.push({
      id: id,
      url: item.url || null,
      weight: Math.max(1, parseInt(item.weight || 1, 10)),
      start_at: toNumberOrNull(item.start_at),
      end_at: toNumberOrNull(item.end_at),
      title_override: item.title_override || null
    });
  });
  
  console.log('Loaded', tracks.length, 'tracks');
  
  if (tracks.length === 0) {
    console.error('No valid tracks found');
    handlePlaylistError();
    return;
  }
  
  generateShuffleOrder();
  injectYouTubeAPI();
}

function generateShuffleOrder() {
  shuffledOrder = [0];
  var remainingIndices = [];
  for (var i = 1; i < tracks.length; i++) {
    remainingIndices.push(i);
  }
  
  for (var i = remainingIndices.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = remainingIndices[i];
    remainingIndices[i] = remainingIndices[j];
    remainingIndices[j] = tmp;
  }
  
  shuffledOrder = shuffledOrder.concat(remainingIndices);
  orderPos = 0;
  currentVideoIndex = 0;
  
  console.log('Shuffle order generated:', shuffledOrder);
}

function handlePlaylistError() {
  playlistLoadError = true;
  var titleEl = document.getElementById('musicTitle');
  var artistEl = document.getElementById('musicArtist');
  
  if (titleEl) titleEl.textContent = 'Playlist Î°úÎìú Ïã§Ìå®';
  if (artistEl) artistEl.textContent = '';
  
  var playBtn = document.getElementById('playPauseBtn');
  var prevBtn = document.getElementById('prevBtn');
  var nextBtn = document.getElementById('nextBtn');
  if (playBtn) playBtn.disabled = true;
  if (prevBtn) prevBtn.disabled = true;
  if (nextBtn) nextBtn.disabled = true;
}

function injectYouTubeAPI() {
  if (playlistLoadError) return;
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var first = document.getElementsByTagName('script')[0];
  first.parentNode.insertBefore(tag, first);
}

function onYouTubeIframeAPIReady() {
  if (!tracks.length) {
    handlePlaylistError();
    return;
  }
  
  player = new YT.Player('youtube-player', {
    height: '0',
    width: '0',
    videoId: tracks[currentVideoIndex].id,
    playerVars: {
      'autoplay': 0,
      'controls': 0,
      'disablekb': 1,
      'fs': 0,
      'modestbranding': 1,
      'rel': 0
    },
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange,
      'onError': onPlayerError
    }
  });
}
window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;

function onPlayerReady(event) {
  isPlayerReady = true;
  event.target.setVolume(30);
  event.target.mute();
  resetProgress();
  
  var t = tracks[currentVideoIndex];
  if (t && t.start_at !== null && t.start_at > 0) {
    try {
      event.target.seekTo(t.start_at, true);
    } catch(e) {}
  }
}

function onPlayerStateChange(event) {
  var musicPlayer = document.getElementById('musicPlayer');
  var playIcon = document.getElementById('playIcon');
  var pauseIcon = document.getElementById('pauseIcon');
  
  if (event.data == YT.PlayerState.PLAYING) {
    playIcon.classList.add('hidden');
    pauseIcon.classList.remove('hidden');
    updateVideoTitle();
    startProgressUpdate();
  } else if (event.data == YT.PlayerState.PAUSED) {
    playIcon.classList.remove('hidden');
    pauseIcon.classList.add('hidden');
    stopProgressUpdate();
  } else if (event.data == YT.PlayerState.ENDED) {
    playIcon.classList.remove('hidden');
    pauseIcon.classList.add('hidden');
    stopProgressUpdate();
    loadNextVideo();
  } else if (event.data == YT.PlayerState.CUED) {
    resetProgress();
  }
}

function onPlayerError(event) {
  console.error('Player error:', event);
  var titleElement = document.getElementById('musicTitle');
  if (tracks.length > 1) {
    titleElement.textContent = 'Ïò§Î•ò Î∞úÏÉù, Îã§Ïùå Í≥° Ïû¨ÏÉù Ï§ë...';
    setTimeout(loadNextVideo, 1200);
  } else {
    titleElement.textContent = 'Ïû¨ÏÉù Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.';
  }
}

function gotoByStep(step) {
  if (tracks.length <= 1) return;
  
  orderPos = orderPos + step;
  
  if (orderPos >= shuffledOrder.length) {
    console.log('Playlist ended, reshuffling...');
    generateShuffleOrder();
    orderPos = 0;
  } else if (orderPos < 0) {
    orderPos = shuffledOrder.length - 1;
  }
  
  currentVideoIndex = shuffledOrder[orderPos];
  console.log('Now playing track', currentVideoIndex + 1, 'of', tracks.length);
}

function loadNextVideo() {
  gotoByStep(1);
  resetProgress();
  player.loadVideoById(tracks[currentVideoIndex].id);
  
  var t = tracks[currentVideoIndex];
  if (t && t.start_at !== null && t.start_at > 0) {
    setTimeout(function() {
      try {
        player.seekTo(t.start_at, true);
      } catch(e) {}
    }, 250);
  }
}

function loadPreviousVideo() {
  gotoByStep(-1);
  resetProgress();
  player.loadVideoById(tracks[currentVideoIndex].id);
  
  var t = tracks[currentVideoIndex];
  if (t && t.start_at !== null && t.start_at > 0) {
    setTimeout(function() {
      try {
        player.seekTo(t.start_at, true);
      } catch(e) {}
    }, 250);
  }
}

function sanitize(s) {
  return String(s || '').replace(/[\r\n]+/g,' ').replace(/\s+/g,' ').trim();
}

function stripDecorations(title) {
  return sanitize(title)
    .replace(/\s*\([^)]*\)\s*$/g,'')
    .replace(/\s*\[.*?\]\s*$/g,'')
    .replace(/\s*(Official\s*(Video|Audio|MV))\s*$/i,'')
    .replace(/\s*-\s*Topic\s*$/i,'');
}

function splitTitleArtist(cleanTitle, cleanAuthor) {
  const parts = cleanTitle.split(' - ').map(sanitize);
  let artist = sanitize(cleanAuthor).replace(/\s*-\s*Topic\s*$/i,'');
  
  if (parts.length >= 2) {
    const leftPart = parts[0];
    const rightPart = parts.slice(1).join(' - ');
    
    if (leftPart.includes(',') || leftPart.includes('&') || leftPart.includes('feat')) {
      artist = leftPart;
    } else {
      artist = leftPart;
    }
    
    return { song: rightPart, artist: artist };
  }
  
  return { song: cleanTitle, artist: artist };
}

function updateVideoTitle() {
  if (!isPlayerReady || !player) return;
  
  try {
    var videoData = player.getVideoData();
    var songEl = document.getElementById('musicTitle');
    var artistEl = document.getElementById('musicArtist');
    
    if (!videoData || !videoData.title) return;
    
    var cleanTitle = stripDecorations(videoData.title || '');
    var cleanAuthor = stripDecorations(videoData.author || '');
    
    var t = tracks[currentVideoIndex];
    if (t && t.title_override) {
      cleanTitle = stripDecorations(t.title_override);
    }
    
    var msg = splitTitleArtist(cleanTitle, cleanAuthor);
    
    if (artistEl) artistEl.textContent = msg.artist || '';
    if (songEl) songEl.textContent = msg.song || 'Background Music';
    
  } catch (e) {
    console.error('Error updating title:', e);
  }
}

function formatTime(seconds) {
  if (!seconds || isNaN(seconds)) return '0:00';
  var mins = Math.floor(seconds / 60);
  var secs = Math.floor(seconds % 60);
  return mins + ':' + (secs < 10 ? '0' : '') + secs;
}

function updateProgress() {
  if (!isPlayerReady || !player || isDragging) return;
  try {
    var currentTime = player.getCurrentTime();
    var duration = player.getDuration();
    if (duration > 0) {
      var percentage = (currentTime / duration) * 100;
      document.getElementById('progressSlider').value = percentage;
      document.getElementById('progressBar').style.width = percentage + '%';
      document.getElementById('currentTime').textContent = formatTime(currentTime);
      document.getElementById('duration').textContent = formatTime(duration);
    }
  } catch (e) {}
}

function startProgressUpdate() {
  if (!updateTimer) {
    updateTimer = setInterval(updateProgress, 500);
    updateProgress();
  }
}

function stopProgressUpdate() {
  if (updateTimer) {
    clearInterval(updateTimer);
    updateTimer = null;
  }
}

function resetProgress() {
  document.getElementById('progressSlider').value = 0;
  document.getElementById('progressBar').style.width = '0%';
  document.getElementById('currentTime').textContent = '0:00';
  document.getElementById('duration').textContent = '0:00';
}

// DOM Ï¥àÍ∏∞Ìôî
document.addEventListener('DOMContentLoaded', function() {
  // ÌÜ†Í∏Ä Í∏∞Îä•
  var toggleHeader = document.getElementById('toggleHeader');
  var section = document.getElementById('ischoi-section');
  
  if (toggleHeader && section) {
    toggleHeader.addEventListener('click', function() {
      section.classList.toggle('open');
    });
    
    // Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Îã´ÌòÄÏûàÎèÑÎ°ù ÏÑ§Ï†ï (open ÌÅ¥ÎûòÏä§ Ï†úÍ±∞)
    // section.classList.add('open');
  }
  
  // Ï¥àÍ∏∞Í∞í ÏÑ§Ï†ï
  document.getElementById('progressSlider').value = 0;
  document.getElementById('volumeSlider').value = 30;
  
  // Playlist Î°úÎìú
  loadPlaylistJson();
  
  // ÌîåÎ†àÏù¥Ïñ¥ Ïª®Ìä∏Î°§
  document.getElementById('playPauseBtn').addEventListener('click', function() {
    if (playlistLoadError || !isPlayerReady || !player) return;
    var state = player.getPlayerState();
    if (state == YT.PlayerState.PLAYING) {
      player.pauseVideo();
    } else {
      updateVideoTitle();
      player.playVideo();
      if (player.isMuted()) {
        player.unMute();
        document.getElementById('volumeIcon').classList.remove('hidden');
        document.getElementById('muteIcon').classList.add('hidden');
      }
    }
  });
  
  document.getElementById('prevBtn').addEventListener('click', function() {
    if (playlistLoadError || !isPlayerReady || !player || tracks.length <= 1) return;
    loadPreviousVideo();
    setTimeout(updateVideoTitle, 500);
  });
  
  document.getElementById('nextBtn').addEventListener('click', function() {
    if (playlistLoadError || !isPlayerReady || !player || tracks.length <= 1) return;
    loadNextVideo();
    setTimeout(updateVideoTitle, 500);
  });
  
  document.getElementById('muteBtn').addEventListener('click', function() {
    if (!isPlayerReady || !player) return;
    if (player.isMuted()) {
      player.unMute();
      document.getElementById('volumeIcon').classList.remove('hidden');
      document.getElementById('muteIcon').classList.add('hidden');
      document.getElementById('volumeSlider').value = player.getVolume();
    } else {
      player.mute();
      document.getElementById('volumeIcon').classList.add('hidden');
      document.getElementById('muteIcon').classList.remove('hidden');
    }
  });
  
  document.getElementById('volumeSlider').addEventListener('input', function() {
    if (!isPlayerReady || !player) return;
    player.setVolume(this.value);
    if (this.value == 0) {
      player.mute();
      document.getElementById('volumeIcon').classList.add('hidden');
      document.getElementById('muteIcon').classList.remove('hidden');
    } else if (player.isMuted()) {
      player.unMute();
      document.getElementById('volumeIcon').classList.remove('hidden');
      document.getElementById('muteIcon').classList.add('hidden');
    }
  });
  
  // ÏßÑÌñâÎ∞î ÎìúÎûòÍ∑∏
  var progressSlider = document.getElementById('progressSlider');
  
  progressSlider.addEventListener('mousedown', function() { isDragging = true; });
  progressSlider.addEventListener('mouseup', function() { isDragging = false; });
  progressSlider.addEventListener('touchstart', function() { isDragging = true; });
  progressSlider.addEventListener('touchend', function() { isDragging = false; });
  
  progressSlider.addEventListener('input', function() {
    document.getElementById('progressBar').style.width = this.value + '%';
    if (isPlayerReady && player) {
      var duration = player.getDuration();
      if (duration > 0) {
        var seekTime = (this.value / 100) * duration;
        document.getElementById('currentTime').textContent = formatTime(seekTime);
      }
    }
  });
  
  progressSlider.addEventListener('change', function() {
    if (!isPlayerReady || !player) {
      isDragging = false;
      return;
    }
    var duration = player.getDuration();
    if (duration > 0) {
      var seekTime = (this.value / 100) * duration;
      player.seekTo(seekTime, true);
    }
    setTimeout(function() { isDragging = false; }, 100);
  });
});
</script>
