<!-- Header / Global Nav -->
<header class="fixed-header" style="position: fixed; top: 0; left: 0; right: 0; z-index: 9999; background: rgba(214, 177, 77, 0.92); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255,255,255,0.4); box-shadow: 0 2px 4px rgba(0,0,0,0.1); height: 70px;">
  <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between gap-4">
    
    <!-- Brand -->
    <a href="{{ '/' | relative_url }}" class="flex items-center gap-3 group" aria-label="FINDS Lab Home">
      <img src="{{ '/assets/img/brand/logo-finds.png' | relative_url }}" 
           alt="FINDS Lab Logo" 
           class="h-10 w-10 rounded-lg ring-2 ring-white/50 object-contain bg-white shadow-sm transition-transform group-hover:scale-105" />
      <div class="leading-tight">
        <div class="text-sm font-extrabold tracking-tight text-white drop-shadow-sm">FINDS Lab.</div>
        <div class="text-[11px] font-bold text-white/90 tracking-wide">Dongduk Women's University</div>
      </div>
    </a>
    
    <!-- Desktop Nav - flex 클래스 먼저, hidden md:flex 순서 중요 -->
    <nav class="flex items-center gap-6 hidden md:flex" aria-label="Primary" style="display: none;">
      <a class="nav-link" href="{{ '/' | relative_url }}">Home</a>
      
      <!-- About -->
      <div class="menu-group" data-menu>
        <a class="nav-link" href="{{ '/about-introduction.html' | relative_url }}">About FINDS</a>
        <div class="submenu-panel" role="menu">
          <a href="{{ '/about-introduction.html' | relative_url }}">Introduction</a>
          <a href="{{ '/about-vision-area.html' | relative_url }}">Research Areas</a>
          <a href="{{ '/about-honors.html' | relative_url }}">Honors & Awards</a>
          <a href="{{ '/about-location.html' | relative_url }}">Location</a>
        </div>
      </div>
      
      <!-- Members -->
      <div class="menu-group" data-menu>
        <a class="nav-link" href="{{ '/members-director.html' | relative_url }}">Members</a>
        <div class="submenu-panel" role="menu">
          <a href="{{ '/members-director.html' | relative_url }}">Director</a>
          <a href="{{ '/members-current.html' | relative_url }}">Current Members</a>
          <a href="{{ '/members-alumni.html' | relative_url }}">Alumni</a>
        </div>
      </div>
      
      <a class="nav-link" href="{{ '/publications.html' | relative_url }}">Publications</a>
      <a class="nav-link" href="{{ '/lectures.html' | relative_url }}">Lectures</a>
      <a class="nav-link" href="{{ '/projects.html' | relative_url }}">Projects</a>
      
      <!-- Archives -->
      <div class="menu-group" data-menu>
        <a class="nav-link" href="{{ '/archives-news.html' | relative_url }}">Archives</a>
        <div class="submenu-panel" role="menu">
          <a href="{{ '/archives-news.html' | relative_url }}">News</a>
          <a href="{{ '/archives-notice.html' | relative_url }}">Notice</a>
          <a href="{{ '/archives-seminar.html' | relative_url }}">Seminar</a>
          <a href="{{ '/archives-gallery.html' | relative_url }}">Gallery</a>
          <a href="{{ '/archives-playlist.html' | relative_url }}">Playlist</a>
        </div>
      </div>
    </nav>
    
    <!-- Mobile Toggle -->
    <div class="flex items-center gap-2">
      <button id="btnMobile" 
              class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-lg bg-white/20 border border-white/30 text-white hover:bg-white/30 transition-colors" 
              aria-label="Open menu" 
              aria-expanded="false" 
              aria-controls="mobileNav">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Mobile Nav - 완전 불투명 흰색 배경 -->
  <div id="mobileNav" class="md:hidden hidden" style="position: absolute; top: 100%; left: 0; right: 0; background: white; z-index: 9998; display: none;">
    <div class="grid gap-2 bg-white border border-gray-200 rounded-xl p-3 max-h-[70vh] overflow-y-auto shadow-lg mx-4 my-3">
      <a class="mobile-link" href="{{ '/' | relative_url }}">Home</a>
      
      <!-- About (Accordion) -->
      <div class="px-3 py-2">
        <div class="flex items-center justify-between">
          <a class="block font-bold mb-1 text-gray-800" href="{{ '/about-introduction.html' | relative_url }}">About FINDS</a>
          <button class="mobile-acc-btn text-gray-600 hover:text-amber-700 transition-colors" aria-expanded="false" aria-controls="mob-about">▾</button>
        </div>
        <div id="mob-about" class="mobile-acc-panel hidden">
          <a href="{{ '/about-introduction.html' | relative_url }}">Introduction</a>
          <a href="{{ '/about-vision-area.html' | relative_url }}">Research Area</a>
          <a href="{{ '/about-honors.html' | relative_url }}">Honors & Awards</a>
          <a href="{{ '/about-location.html' | relative_url }}">Location</a>
        </div>
      </div>
      
      <!-- Members (Accordion) -->
      <div class="px-3 py-2">
        <div class="flex items-center justify-between">
          <a class="block font-bold mb-1 text-gray-800" href="{{ '/members-director.html' | relative_url }}">Members</a>
          <button class="mobile-acc-btn text-gray-600 hover:text-amber-700 transition-colors" aria-expanded="false" aria-controls="mob-members">▾</button>
        </div>
        <div id="mob-members" class="mobile-acc-panel hidden">
          <a href="{{ '/members-director.html' | relative_url }}">Director</a>
          <a href="{{ '/members-current.html' | relative_url }}">Current Members</a>
          <a href="{{ '/members-alumni.html' | relative_url }}">Alumni</a>
        </div>
      </div>
      
      <a class="mobile-link" href="{{ '/publications.html' | relative_url }}">Publications</a>
      <a class="mobile-link" href="{{ '/lectures.html' | relative_url }}">Lectures</a>
      <a class="mobile-link" href="{{ '/projects.html' | relative_url }}">Projects</a>
      
      <!-- Archives (Accordion) -->
      <div class="px-3 py-2">
        <div class="flex items-center justify-between">
          <a class="block font-bold mb-1 text-gray-800" href="{{ '/archives-news.html' | relative_url }}">Archives</a>
          <button class="mobile-acc-btn text-gray-600 hover:text-amber-700 transition-colors" aria-expanded="false" aria-controls="mob-archives">▾</button>
        </div>
        <div id="mob-archives" class="mobile-acc-panel hidden">
          <a href="{{ '/archives-news.html' | relative_url }}">News</a>
          <a href="{{ '/archives-notice.html' | relative_url }}">Notice</a>
          <a href="{{ '/archives-seminar.html' | relative_url }}">Seminar</a>
          <a href="{{ '/archives-gallery.html' | relative_url }}">Gallery</a>
          <a href="{{ '/archives-playlist.html' | relative_url }}">Playlist</a>
        </div>
      </div>
    </div>
  </div>
</header>

<style>
/* ========= 헤더 네비 시인성 업그레이드 ========= */
.nav-link{
  display:inline-flex; align-items:center; justify-content:center;
  height:46px; padding:0 14px; border-radius:10px;
  font-weight:800; line-height:1;
  color:#ffffff !important;  /* 중요: 흰색 유지 */
  text-shadow: 0 1px 1px rgba(0,0,0,.18);
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease;
}

.nav-link:hover,
.menu-group:hover > .nav-link{
  color:#ffffff !important;
  background: rgba(0,0,0,.15);
  text-shadow: 0 2px 6px rgba(0,0,0,.35);
}

.nav-link:focus-visible{
  outline: none;
  color:#ffffff !important;
  background: rgba(0,0,0,.20);
  text-shadow: 0 2px 6px rgba(0,0,0,.35);
  box-shadow: 0 0 0 3px rgba(255,255,255,.45);
}

/* 드롭다운 */
.menu-group{ position:relative; }
.submenu-panel{
  display:none; position:absolute; top:calc(100% + 8px); left:0;
  background:#fff; border:1px solid rgba(0,0,0,.08); border-radius:12px;
  box-shadow:0 12px 40px rgba(0,0,0,.12);
  min-width:180px; padding:8px 0; z-index:50;
}

/* site.css의 hover 규칙과 호환 */
.menu-group:hover > .submenu-panel,
.menu-group[data-open="true"] > .submenu-panel{ 
  display:block !important; 
}

.submenu-panel a{
  display:block; padding:8px 14px; font-weight:700; font-size:14px;
  color:#1f2937; border-radius:8px; transition: background-color .15s ease, color .15s ease;
}
.submenu-panel a:hover{
  background:#fff7e0;
  color:#8a6a12;
}

/* 모바일 링크 - 통일된 스타일 */
.mobile-link{
  display:block; 
  padding:10px 12px;
  font-weight:700 !important;  /* 700으로 통일 */
  font-size:15px !important;    /* 크기 통일 */
  color:#1f2937; 
  border-radius:8px;
  text-decoration: none;
  line-height: 1.5;
}
.mobile-link:hover{ 
  background:#fff7e0; 
  color:#8a6a12; 
}

/* 모바일 아코디언 헤더의 메인 링크 - mobile-link와 동일하게 */
.px-3.py-2 > div > a:first-child {
  display:block;
  padding:10px 12px;
  font-weight:700 !important;  /* 700으로 통일 */
  font-size:15px !important;    /* 크기 통일 */
  color:#1f2937;
  text-decoration: none;
  line-height: 1.5;
}

/* 아코디언 버튼 위치 조정 */
.mobile-acc-btn {
  font-size: 18px;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 모바일 아코디언 서브메뉴 */
.mobile-acc-panel{ 
  display:none; 
  margin-left:1rem; 
}
.mobile-acc-panel a{
  display:block; 
  padding:8px 12px;   /* 패딩 조정 */
  font-size:14px !important;     
  font-weight:600 !important;  /* 서브메뉴는 살짝 얇게 */
  color:#555; 
  border-radius:6px;
  text-decoration: none;
  line-height: 1.5;
}
.mobile-acc-panel a:hover{ 
  background:#fff7e0; 
  color:#8a6a12; 
}
.mobile-acc-panel:not(.hidden) { 
  display:grid; 
  gap:4px; 
}

/* site.js show 클래스 지원 */
#mobileNav.show {
  display: block !important;
}

/* 모바일 버튼 표시 */
@media (max-width: 767px) {
  #btnMobile {
    display: inline-flex !important;
  }
  #mobileNav.hidden {
    display: none !important;
  }
}

/* 데스크톱 네비 표시 */
@media (min-width: 768px) {
  nav[aria-label="Primary"] {
    display: flex !important;
  }
  #btnMobile {
    display: none !important;
  }
  #mobileNav {
    display: none !important;
  }
}

/* 헤더 높이 조정 */
@media (max-width: 768px) {
  .fixed-header {
    height: 60px !important;
  }
}
</style>
